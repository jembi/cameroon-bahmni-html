<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Bahmni</title>
<link href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap" rel="stylesheet">
<style>
body {
    font-family: Open Sans, Regular;
	display: block;
	margin: 0px;
	overflow: hidden;
	line-height: normal;
    background: #ffffff;
}

.clint-logo-wrapper {
	display: block;
	text-align: left;
	background: #3685C2;
	height: 110px;
	font-size: 20px;
	padding-top: 10px;
}

.header-menu {
	display: block;
	text-align: center;
	padding-top: 10px;
	background: #BDD7EC;
}

.header_text {
	text-align: center;
	margin: 15px auto 15px;
	color: #333;
	font-size: 30px;
	width: 100%;
}

#hospitalName {
	text-align: right;
	color: #FFFFFF;
    font-size: 28px;
	padding-right: 50px;
}

#headerContent tr {
	background: none;
	border: 0;
}

#headerContent td {
	border: 0;
}

#mohLabel {
	color: #FFFFFF;
	font-size: 16px;
}

.bottom-banner-wrapper {
	position: fixed;
	text-align: center;
	bottom: 60px;
	width: 100%;
	left: 10px;
    right: 10px;
    background: #ffffff;
}

.bottom-banner-wrapper img {
	max-width: 500px;
}

.container {
	width: 750px;
	margin: 20px auto 0;
	padding: 0 15px 20px;
	overflow: hidden;
	background: #ffffff;
	z-index: 2;
}

.container>h4 {
	margin: 0;
	text-align: center;
	color: #646464;
	font-size: 16px;
}

.section {
	position: relative;
	width: 207px;
	min-height: 200px;
	display: inline-block;
	margin: 10px 15px;
	background: #ffffff;
	padding: 5px;
	border-radius: 11px;
	box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);
	transition: all 0.3s cubic-bezier(.25, .8, .25, 1);
	z-index: 2;
	vertical-align: top;
}

.section:hover {
	box-shadow: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px
		rgba(0, 0, 0, 0.22);
}

.launch {
	text-align: center;
	font-size: 20px;
}

.launch img {
	width: 190px;
	height: 190px;
	display: block;
	margin: 15px auto;
}

.launch span {
	min-height: 55px;
	display: inline-block;
	color: #f4834d;
	font-weight: bold;
	font-size: 18px;
	text-transform: uppercase;
}

.warning-message {
	text-align: center;
	margin: 0 auto;
	color: #ffac2e;
	width: 50%;
	background: #ffffff;
	padding-top: 10px;
}

.warning-message span {
	font-weight: bolder;
	font-size: 13px;
	display: inline-block;
	margin-bottom: 5px;
}

.warning-message p {
	padding: 0 50px;
	margin: 0;
	font-size: 14px;
}

.power-by {
	position: fixed;
	width: 100%;
	bottom: 7px;
	text-align: center;
	background: #ffffff;
	padding-bottom: 5px;
	font-size: 12px;
	z-index: -1;
	color: #898989;
}

.power-by img {
	width: 55px;
	vertical-align: middle;
	margin: 0 1px;
}

.power-by a {
	color: #000;
}

</style>
<script>
        function init() {
            serverTimeZone();
            getLogoAndHeaderText();
        }
        function load(url, elementClass) {
            callAjax(url, function (data) {
                var infoElement = document.getElementsByClassName(elementClass)[0];
                if (infoElement) {
                    if (data) {
                        var infoDetailsElement = infoElement.getElementsByClassName("info-details")[0];
                        renderInfoLinks(data, infoDetailsElement);
                    } else {
                        var infoIconElement = infoElement.getElementsByClassName("info-icon")[0];
                        infoIconElement.className += " error";
                    }
                }
            });
        }
        function callAjax(url, callback) {
            var xmlhttp = new XMLHttpRequest();
            xmlhttp.onreadystatechange = function () {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                    try {
                        callback(JSON.parse(xmlhttp.responseText));
                    } catch (ex) {
                        callback(undefined);
                    }
                }
            };
            xmlhttp.open("GET", url, true);
            xmlhttp.send();
        }
        function serverTimeZone() {
            callAjax("/cgi-bin/systemdate", function(data) {
               if(data){
                   var serverTime = data.date;
                   var offset = data.offset;
                   var localTime = new Date().toLocaleString();
                   var localTimeZone = getLocalTimeZone();
                   if(offset && !new Date().toString().includes(offset)) {
                        var warningMessageParagraph = document.getElementsByClassName("warning-message-paragraph")[0];
                        var warningMessage = document.getElementsByClassName("warning-message-span")[0];
                        warningMessage.innerHTML = "<img src='/bahmni/images/warning.png'> Warning";
                        warningMessageParagraph.innerHTML= "The server timezone (" + serverTime + ") is different from your browser's time/timezone (" + localTime + " " +localTimeZone + "). This can cause some data or reports to appear incorrect. Please contact the administrator for further assistance.";
                   }
               }
            });
        }
        var getLocalTimeZone = function () {
            var currentLocalTime = new Date().toString();
            var localTimeZoneList = currentLocalTime.split(" ");
            var localTimeZone = localTimeZoneList[localTimeZoneList.length-1];
            localTimeZone = localTimeZone.substring(1, localTimeZone.length - 1);
            return localTimeZone;
        };

        function getLogoAndHeaderText() {
            callAjax("/bahmni_config/openmrs/apps/home/whiteLabel.json", function(data) {
                if(data) {
                    if(data.homePage.header_text) {
                        var headerTextElement = document.getElementsByClassName("header_text")[0];
                        headerTextElement.innerHTML = "<b>" + data.homePage.header_text+ "</b>"
                    }

                    if(data.homePage.logo) {
                        var logoImage = document.getElementsByClassName("client_logo")[0];
                        logoImage.src = data.homePage.logo
                    }

                    if(data.helpLink.url) {
                        var headerTextElement = document.getElementsByClassName("helper_url")[0];
                        headerTextElement.href = data.helpLink.url;
                    }
                    if(data.homePage.hospitalName) {
                        var titleTextElement = document.getElementsByClassName("hospitalName")[0] ;
                        titleTextElement.innerHTML = data.homePage.hospitalName;
                    }
                    if (data.homePage.bottomBanner){
                        document.getElementById("bottom-banner-image").src = data.homePage.bottomBanner;
                    }
                    if (data.homePage.erpUrl){
                        document.getElementById("erp-app-link").href = data.homePage.erpUrl;
                    }
                }
            });
        }

    </script>
</head>

<body onload="init()">
	<div class="clint-logo-wrapper">
		<table id="headerContent" style="width: 100%">
			<tr>
				<td style="width: 13%;text-align-last: right"><img class="client_logo" src="/images/bahmniLogoFull.png" /><img
					class="client_logo" src="/images/mohLogo.png" /></td>
					<td><span id="mohLabel">Cameroon Ministry of Public
						Health<br /> Ministère de la Santé Publique du Cameroun
						</span></td>
				<td id="hospitalName" class="hospitalName">Hopital name</td>
			</tr>
		</table>
	</div>
	<div class="header-menu"></div>
	<div class="header_text">
		<span style="font-size:20px">Bienvenu au</span><br>
		<strong>Dossier Médical Electronique </strong><br>du Ministère de la Santé Publique du Cameroun
	</div>
	<div class="container">
		<h4>DÉMARRER</h4>
		<div class="section">
			<div class="launch">
				<a href="/bahmni/home" target="_blank"> <img
					src="/bahmni/images/app.png" />
				</a>
			</div>
		</div>
		<div class="section">
			<div class="launch">
				<a href="/openelis" target="_blank"> <img
					src="/bahmni/images/lab.png" />
				</a>
			</div>
		</div>
		<div class="section">
			<div class="launch">
				<a id="erp-app-link" target="_blank"> <img
					src="/bahmni/images/bills.png" />
				</a>
			</div>
		</div>
	</div>
	<div class="warning-message">
		<span class="warning-message-span"></span>
		<p class="warning-message-paragraph"></p>
	</div>
	<div class="bottom-banner-wrapper">
		<img id="bottom-banner-image">
	</div>
	<div class="power-by">
		<img src="/bahmni/images/bahmniLogoFull.png" alt="Bahmni"> <a
			class="helper_url"
			href="https://bahmni.atlassian.net/wiki/display/BAH/Bahmni+Home">
			Aide sur Bahmni</a>
	</div>

</body>
</html>